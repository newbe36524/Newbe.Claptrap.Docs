---
title: 'Alcance de por vida de Claptrap'
description: 'Alcance de por vida de Claptrap'
---


El ciclo de vida de Claptrap se describe en dos categorías amplias según el ciclo de vida de tiempo de ejecución：del autor y el ciclo de vida del tiempo de diseño.

## Ciclo de vida en tiempo de ejecución

El ciclo de vida en tiempo de ejecución hace referencia al comportamiento del ciclo de vida de los objetos individuales en la memoria durante el funcionamiento del sistema Claptrap.Para：en un sistema Web, a cada solicitud Web se le asigna normalmente un ciclo de vida y el sistema Claptrap tiene un diseño de ciclo de vida similar.Estos ciclos de vida tienen un impacto en las extensiones de componentes o el desarrollo empresarial para los desarrolladores.El ciclo de vida en tiempo de ejecución del marco de Trabajo de Claptrap se divide en：Proceso, Claptrap y Controlador de eventos.

Nivel de proceso.Objeto que está diseñado como un ciclo de vida en el nivel de proceso y pertenece a un único objeto en el sentido general.Cada proceso de Claptrap en ejecución tiene su propio objeto singleton.Normalmente, por ejemplo, en el marco de Claptrap, para aumentar la velocidad a la que se escriben los eventos en la capa de persistencia, cada destino de capa de persistencia corresponde a un procesador por lotes (Batch Event Saver).Solo tienen una instancia a lo largo del ciclo de vida del proceso, correspondiente a la capa de persistencia correspondiente uno a uno, de modo que los eventos se pueden combinar y escribir en la capa de persistencia, mejorando así el rendimiento de escritura.En general, los objetos diseñados para un ciclo de vida de nivel de proceso tienen uno o varios de los siguientes characteristics：

1. Lógica o código que solo debe ejecutarse una vez a lo largo del ciclo de vida del proceso.Esto generalmente se puede lograr con lazy y singletons.
2. Solo se requiere un único objeto durante todo el ciclo de vida del proceso.Por ejemplo, Claptrap Design Store, Opciones de Claptrap, etc.
3. Sólo puede haber un único objeto durante todo el ciclo de vida del proceso.Por ejemplo, cliente de Orleans.

Nivel de claptrap.Los objetos del ciclo de vida de Claptrap se crean con la activación de Claptrap y se liberan con la inactivación de Claptrap.Estos objetos generalmente están altamente correlacionados con una identidad de Claptrap.Por ejemplo, Claptrap Design, Event Saver, Event Loader, State Saver, State Loader, etc. asociados con Claptrap Identity.

Controlador de eventos.Los objetos de ciclo de vida de nivel de procesador de eventos se crean con la creación del procesador de eventos y se liberan con el lanzamiento del procesador de eventos.Este nivel de ciclo de vida es similar al de la solicitud Web.Normalmente, la unidad de trabajo de una transacción de base de datos unificada cae a este nivel.

## Ciclo de vida en tiempo de diseño

El ciclo de vida en tiempo de diseño se refiere al ciclo de vida del objeto de negocio para Claptrap.Esto no tiene nada que ver con si el programa se está ejecutando o no, o incluso si se utiliza el programa.Por poner un ejemplo específico, los pedidos en sistemas convencionales de comercio electrónico.El límite de tiempo de negocio activo para un pedido normalmente no supera de tres a seis meses.Cuando se supera este límite de tiempo, los datos del pedido no se pueden modificar.Aquí el límite de tiempo de "tres a seis meses" se denomina el ciclo de vida en tiempo de diseño de una orden.En un sistema Claptrap, si un objeto ha excedido su ciclo de vida en tiempo de diseño, se representa como "el negocio ya no necesita activar este Claptrap".Esto conduce a la siguiente inferences：

1. Los eventos que Claptrap ha almacenado no tienen sentido, y eliminarlos libera espacio libre.
2. El código de negocio de Claptrap ya no requiere mantenimiento y puede optar por quitar la referencia o quitar el código.

Por lo tanto, si Claptrap está diseñado con un ciclo de vida de diseño más corto, es más propicio para reducir el consumo de recursos y los costos de mantenimiento de código, y por el contrario, aumentar los costos de almacenamiento y las dificultades de mantenimiento.Como resultado, al diseñar sistemas Claptrap, existe una preferencia por ciclos de vida más cortos en tiempo de diseño.Y este término, pero también una respuesta directa al hecho de que está totalmente determinado por "diseño". A continuación, vamos a enumerar algunas divisiones comunes del ciclo de vida en tiempo de diseño.

### Demarcación de límites de negocio

Esta es la división más común.Los objetos de negocio se dividen según los requisitos del modelado de dominios.Y estos objetos de negocio suelen tener un ciclo de vida fijo.Como en el "orden" anterior es un ejemplo común de dividir los ciclos de vida por límites de negocio.Al dividir utilizando este método, sólo es importante tener en cuenta que Claptrap cumple con los requisitos básicos de "mayor o igual que el rango mínimo de recursos competitivos".Los desarrolladores pueden experimentar esta división a través de un ejemplo de un "sistema de venta de billetes de tren".

### Demarcación de límites condicionales

En general, un ciclo de vida razonable ya se puede dividir en función de la demarcación de límites empresariales.Sin embargo, los objetos con un ciclo de vida en tiempo de diseño pueden producirse si se dividen solo por límites empresariales.Supongamos que estos objetos tienen operaciones de eventos muy densas.Entonces la cantidad de eventos generados será inusualmente grande.Para ello, introducimos formas controladas por el ser humano para acortar el ciclo de vida en tiempo de diseño.Esta división se basa en condiciones específicas.Esto se denomina demarcación de límite condicional.Y el más clásico de ellos es el uso de "límites de límite de tiempo" para dividir.

Aquí ilustramos esta división utilizando los objetos del carro de la compra en el ejemplo de inicio rápido.En primer lugar, un carro de la compra es un objeto relacionado con el usuario que se puede activar siempre y cuando el usuario esté presente en el sistema, lo que significa que su ciclo de vida de diseño es "permanente".Por lo tanto, los eventos relacionados no se pueden eliminar y deben guardarse permanentemente para asegurarse de que los datos del carro de la compra son correctos.Pero si ya no nos preocupa lo que le pasó al carro de la compra hace un año.Podemos dividir manualmente el carrito de compras de un solo usuario por año.Al mismo tiempo, podemos "indicar" el carro de la compra en los próximos dos años.Esto continúa los datos de estado del año anterior, lo que resulta en un ciclo de vida de diseño más corto para el carro de la compra del usuario y sin impacto en el negocio.Podemos usar una leyenda clásica china, "Fool's Mountain", para entender esta división del ciclo de vida del tiempo de diseño basado en el tiempo.En la historia, el tonto es mortal, aunque no puede vivir mucho (ciclo de vida de tiempo de diseño corto), pero el espíritu de tonto (ciclo de vida de tiempo de diseño más largo) puede ser con las generaciones futuras y continuar, y por lo tanto puede completar el gran trabajo de mover montañas.Cuando se reemplaza a cada generación de "tontos", se produce la "copia de estado" mencionada anteriormente (continuación espiritual).Por lo tanto, con un ciclo de vida de tiempo de diseño más corto, se cumplen los requisitos de un ciclo de vida de tiempo de diseño más largo o incluso permanente.

> "Los tontos se mueven mountains Taih, Wang House dos montañas, sietecientas millas cuadradas, siete u ocho mil pies de altura, originalmente en la parte sur de Zhangzhou, al norte de la orilla norte amarilla del río Norte. Debajo de la montaña del norte hay un hombre llamado Fool Gong, que tiene casi 90 años y vive justo enfrente de la montaña.Sufriendo de la obstrucción en la parte norte de la montaña, salió a tomar un desvío, y llamó a toda la familia para discutir it："Haré todo lo posible para desenterrar las montañas empinadas para que el camino vaya hasta la parte sur de Yuzhou y a la orilla sur de Hanshui, ¿de acuerdo?" Todos están de acuerdo.Su esposa asked："Con tu fuerza, incluso el padre de la colina no puede ser aplanado, ¿puede tai line, la casa del rey cómo?"Además, ¿dónde pusiste la tierra y las piedras? "La gente dice,：Tíralo en el borde del Mar de Bohai, el lado norte de la tierra oculta." Así que el tonto guió a las tres personas que podían cargar con la carga en la montaña, cincelar la piedra, cavar la tierra, y transportar 畚 la orilla del mar con un pepinillo.La viuda de un vecino, Jingcheng, tenía un huérfano, que tenía sólo siete u ocho años, y saltó para ayudarlo.Temporada de invierno y verano, con el fin de ir y volver una vez. El hombre sabio de Hequ se rió del tonto y le impidió hacerlo, diciendo:："¡Eres tan estúpido!"Con sus años residuales, el resto de la fuerza incluso una hierba en la montaña no se puede mover, pero también la piedra del suelo ¿cómo? Beishan long sighed："Tu mente es realmente terco, terco no puede abrir el truco, incluso las viudas huérfanas no pueden ser comparadas".Incluso si muero, hay hijos en ah; hijos y nietos, nietos e hijos; hijos, hijos y nietos; hijos y nietos interminables, pero las montañas no aumentarán, sino que también temerán de cavar desigualmente? "River Quzhi no tiene nada que responder. El dios de la montaña sosteniendo la serpiente oyó hablar de ella, por temor a que cavara sin cesar y se lo reportara al emperador.El Emperador fue conmovido por la sinceridad del tonto y ordenó a los dos hijos de Hércules Kwa que se llevaran las dos montañas, una en la parte oriental de Shufang y otra en la parte sur de Luzhou.A partir de este punto, la parte sur de Luzhou hasta la orilla sur de Hanshui, no hay más montañas bloqueadas.
