---
title: "Шаг 2 - Создание проекта"
description: "Шаг 2 - Создание проекта"
---

Далее в [Первый шаг - Подготовка среды разработки](01-1-Preparation.md) , и мы перейди к пониманию того, как создать проект Newbe.Claptrap.

<!-- more -->

## Установите шаблон проекта

Откройте консоль, чтобы выполнить следующую команду для установки последнего шаблона проекта：

```bash
dotnet new --install Newbe.Claptrap.Template
```

После установки можно просмотреть установленный шаблон проекта в результатах установки.

![Newbe.claptrap.template установлен](/images/20200709-001.png)

## Создайте проект

Выберите расположение, создайте папку, и в этом примере выберите папку с именем`HelloClaptrap`в разделе`D:\Repo`.Папка будет служить папкой кода для нового проекта.

Откройте консоль и переключите рабочий каталог на`D:\Repo\HelloClaptrap`.Затем можно создать проект, выполнив следующую команду：

```bash
dotnet new newbe.claptrap --name HelloClaptrap
```

> Как правило, рекомендуется`папку\RGit в качестве папки репозитория Git для`D:  epo\HelloClaptrap.Управляйте исходным кодом с помощью системы управления версиями.

## Запустите проект

Далее мы запускаем проект с помощью командной строки.Переключите командную строку на`C:\Repos\HelloClaptrap\HelloClaptrap`и выполните следующую команду：

```bash
tye run
```

После запуска можно просмотреть все элементы, содержащиеся в шаблоне проекта, на tye dashboard：

![newbe.claptrap service](/images/20210217-002.png)

> Адрес tye dashboard обычно составляет <http://localhost:8000>, и если порт занят, он автоматически использует другой порт, и вы можете просмотреть запрос в командной строке, чтобы получить текущий адрес.

Мы можем найти адрес работы службы helloclaptrap-webapi`интерфейсе,`как показано на рисунке выше.Например, как показано на рисунке выше, его адрес конечной точки<http://localhost:14285>.

Поэтому мы используем браузер, чтобы открыть адрес, чтобы просмотреть интерфейс swagger.

На странице swagger попробуйте вызвать API`/AuctionItems/{itemId}/status`API：

![newbe.claptrap AuctionItems​](/images/20210217-003.png)

Служба возвращает 200, что означает, что компоненты текущей службы запущены в обычном режиме.

## Опыт проекта

Проект, созданный с помощью шаблона проекта, на самом деле является программой, имитицией аукционного аукционного бизнеса.

Аукционные торги являются типичным бизнес-сценарием, который может иметь однофайлические запросы для обработки.С помощью Newbe.Claptrap можно легко решить эту проблему.В последующих документах мы будем последовательно использовать этот бизнес-сценарий для демонстрации, поэтому вот простое описание бизнес-сценария.

### Бизнес-правила

Бизнес-правила приведены ниже：

1. Каждый аукцион осуществляется уникальным `itemId`
2. Аукционы могут быть проданы только в течение определенного периода времени
3. Аукцион имеет начальную аукционную цену
4. Все участники торгов имеют уникальный `userId`
5. Участник торгов может сделать неограниченную ставку на аукцион в течение периода аукциона, и до тех пор, пока его ставка больше текущей максимальной ставки, он может считаться действительным участником торгов и стать текущим участником торгов на аукционе
6. Необходимо записать подробную информацию о всех успешных ставках, включая время ставки, ставку, участника предложения.

Статус аукциона выглядит следующим образом：

- `0 Planned` для выстрела
- `1 OnSell` выставлен на аукцион
- `2 Sold` были сфотографированы
- `3 UnSold` потоковой съемки

### Дизайн API

Для простейшей демонстрации в этом примере были разработаны следующие api ：

- `GET /AuctionItems/{itemId}/status` для получения текущего статуса аукциона указанного аукциона
- `получения сведений о указанном аукционе с помощью{itemId}` GET/AuctionItems/AuctionItems/
- `на указанный аукцион` по  POST /AuctionItems

Далее мы рассмотрим эффект этих API с помощью простого сценария.

#### Ищите аукционы, которые в настоящее время снимутся

Поскольку статус аукциона ограничен временем, для того, чтобы разработчики могли найти аукционы в различных состояниях в любое время, в проекте используются алгоритмы на основе времени для создания аукционов со всеми состояниями.

Разработчики могут использовать 0/1/2/3 четыре вызова itemId`GET /AuctionItems/{itemId}/status`для получения текущего состояния аукциона.

Существует по крайней мере один аукцион со статусом `1 OnSell` 1.Для последующего удобства мы предполагаем, что его itemId 1.

#### Просмотр сведений об аукционе

Сведения `аукционе можно получить с помощью{itemId}` GET/AuctionItems/Tims.Например, если мы используем itemId для запроса 1, мы можем получить следующие результаты:

```json
{
  "state": {
    "biddingRecords": null,
    "basePrice": 10,
    "startTime": "2021-02-27T12:59:12.673013+08:00",
    "endTime": "2021-02-27T16:59:12.673013+08:00"
  }
}
```

Приведенные выше результаты：

- Аукцион был продан по цене basePrice 10
- Период торгов — время startTime-endTime
- Текущий рекорд аукциона biddingRecords пуст

Периоды могут изменяться в зависимости от времени запуска проекта в зависимости от времени запуска проекта.

#### Попробуйте сделать ставку

Далее мы вызываем`POST /AuctionItems`, чтобы попытаться сделать ставку на аукцион, который в настоящее время находится в процессе аукциона, вызывая и передавайте параметры следующим образом：

```json
{
  "userId": 1,
  "price": 36524,
  "itemId": 1
}
```

Параметры описаны ниже：

- Ставка userId 1
- Ставка 36524
- Предметом аукциона является itemId 1

Это будет результатом：

```json
{
  "success": true,
  "userId": 1,
  "auctionItemStatus": 1,
  "nowPrice": 36524
}
```

Возвращаемые результаты показывают, что：

- Success сделал успешную ставку
- Ставка userId 1
- Последняя ставка 36524
- Аукцион в настоящее время находится в `1 OnSell`

Затем с помощью `GET /AuctionItems/{itemId}` вы можете увидеть текущую последнюю информацию об аукционе：

```json
{
  "state": {
    "biddingRecords": {
      "36524": {
        "userId": 1,
        "price": 36524,
        "biddingTime": "2021-02-27T07:31:09.8954519+00:00"
      }
    },
    "basePrice": 10,
    "startTime": "2021-02-27T12:59:12.673013+08:00",
    "endTime": "2021-02-27T16:59:12.673013+08:00"
  }
}
```

Приведенные выше результаты：

- Запись заявки была обновлена с последними сведениями о торгах.

Это завершает простейшую демонстрацию ставки.

Разработчики могут попробовать более различные состояния и параметры, чтобы испытать базовое использование API выше.Например, ставка меньше текущей максимальной ставки, ставка на нерейтационный товар и т.д.

## Остановите проект

Если требуется остановить запущенный в данный раз проект шаблона.Просто нажмите клавишу`Ctrl`+`C`на консоли, на которой вы только что tye run , чтобы остановить запущенную программу.

## Сделать небольшой узел

В этой статье мы узнали об основных шагах по установке шаблона проекта и его использованию.

Далее мы рассмотрим основные элементы, включенные в шаблон проекта.

<!-- md Footer-Newbe-Claptrap.md -->
