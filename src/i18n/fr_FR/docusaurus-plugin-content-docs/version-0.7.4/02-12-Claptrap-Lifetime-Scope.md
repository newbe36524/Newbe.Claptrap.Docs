---
title: 'Portée à vie Claptrap'
description: 'Portée à vie Claptrap'
---


Le cycle de vie claptrap est décrit en deux grandes catégories selon le cycle de vie de l’auteur：durée de vie et le cycle de vie du temps de conception.

## Cycle de vie en temps d’exécution

Le cycle de vie de l’exécution se réfère au comportement du cycle de vie des objets individuels en mémoire pendant le fonctionnement du système Claptrap.Par：dans un système Web, chaque demande Web est généralement assignée à un cycle de vie, et le système Claptrap a une conception similaire du cycle de vie.Ces cycles de vie ont un impact sur les extensions de composants ou le développement commercial des développeurs.Le cycle de vie de temps d’exécution du cadre Claptrap est divisé en：process, claptrap et gestionnaire d’événements.

Niveau de processus.Un objet qui est conçu comme un cycle de vie au niveau du processus et appartient à un seul objet au sens général.Chaque processus Claptrap en cours d’exécution a son propre objet singleton.En règle générale, par exemple, dans le cadre Claptrap, pour augmenter la vitesse à laquelle les événements sont écrits à la couche de persistance, chaque cible de couche de persistance correspond à un processeur de lot (Économiseur d’événements par lots).Ils n’ont qu’une seule instance tout au long du cycle de vie du processus, correspondant à la couche de persistance correspondante en une à une, de sorte que les événements peuvent être fusionnés et écrits à la couche de persistance, améliorant ainsi les performances d’écriture.En général, les objets conçus pour un cycle de vie au niveau du processus ont un ou plusieurs des éléments characteristics：

1. Logique ou code qui n’a besoin d’être exécuté qu’une seule fois tout au long du cycle de vie du processus.Cela peut généralement être réalisé avec Lazy et singletons.
2. Un seul objet est nécessaire tout au long du cycle de vie du processus.Par exemple, Claptrap Design Store, Claptrap Options, et ainsi de suite.
3. Il ne peut y avoir qu’un seul objet tout au long du cycle de vie du processus.Par exemple, Orléans Client.

Niveau Claptrap.Les objets du cycle de vie claptrap sont créés avec l’activation claptrap et libérés avec l’inactivation de Claptrap.Ces objets sont généralement fortement corrélés avec une identité Claptrap.Par exemple, Claptrap Design, Event Saver, Event Loader, State Saver, State Loader, et ainsi de suite associé à l’identité Claptrap.

Gestionnaire d’événements.Les objets du cycle de vie au niveau du processeur d’événements sont créés avec la création du processeur d’événement et libérés avec la sortie du processeur d’événement.Ce niveau de cycle de vie est similaire à celui de la demande Web.En règle générale, l’unité de travail pour une transaction de base de données unifiée tombe à ce niveau.

## Cycle de vie du temps de conception

Le cycle de vie de conception-temps se réfère au cycle de vie de l’objet d’affaires pour Claptrap.Cela n’a rien à voir avec la question de savoir si le programme est en cours d’exécution ou non, ou même si le programme est utilisé.Pour donner un exemple précis, les commandes dans les systèmes de commerce électronique conventionnels.Le délai d’affaires actif pour une commande ne dépasse généralement pas trois à six mois.Lorsque ce délai est dépassé, les données de commande ne peuvent pas être modifiées.Ici, le délai de « trois à six mois » est appelé le cycle de vie de conception-temps d’une commande.Dans un système Claptrap, si un objet a dépassé son cycle de vie du temps de conception, il est représenté comme « l’entreprise n’a plus besoin d’activer ce Claptrap ».Cela conduit à l’inferences：

1. Les événements que Claptrap a stockés n’ont aucun sens, et leur suppression libère de l’espace libre.
2. Le code d’affaires du Claptrap ne nécessite plus de maintenance, et vous pouvez choisir de supprimer la référence ou de supprimer le code.

Par conséquent, si Claptrap est conçu avec un cycle de vie de conception plus court, il est plus propice à la réduction de la consommation de ressources et des coûts de maintenance du code, et inversement, l’augmentation des coûts de stockage et des difficultés d’entretien.Par conséquent, lors de la conception des systèmes Claptrap, il y a une préférence pour des cycles de vie plus courts.Et ce terme, mais aussi une réponse directe au fait qu’il est entièrement déterminé par le « design ». Ensuite, énumérons quelques divisions communes du cycle de vie du temps de conception.

### Démarcation des frontières d’affaires

C’est la division la plus courante.Les objets d’affaires sont divisés en fonction des exigences de la modélisation de domaine.Et ces objets d’affaires ont généralement un cycle de vie fixe.Comme dans l’ordre précédent est un exemple courant de division des cycles de vie par les frontières de l’entreprise.Lors de la division à l’aide de cette méthode, il est seulement important de noter que Claptrap répond aux exigences de base de « plus ou égale à la gamme minimale de ressources compétitives ».Les développeurs peuvent faire l’expérience de cette division à travers un exemple d’un « système de billetterie de train ».

### Délimitation conditionnelle des limites

En général, un cycle de vie raisonnable peut déjà être divisé en fonction de la délimitation des limites de l’entreprise.Toutefois, les objets ayant un cycle de vie de conception peuvent se produire s’ils ne sont divisés que par les frontières de l’entreprise.Supposons que ces objets aient des opérations d’événements très denses.Ensuite, la quantité d’événements générés sera exceptionnellement grande.Pour ce faire, nous introduisons des façons contrôlées par l’homme de raccourcir le cycle de vie du temps de conception.Cette division est basée sur des conditions spécifiques.C’est ce qu’on appelle la délimitation conditionnelle des limites.Et le plus classique d’entre eux est l’utilisation de « limites de temps » pour diviser.

Ici, nous montrons cette division en utilisant les objets du panier dans l’exemple Quick Start.Tout d’abord, un panier d’achat est un objet lié à l’utilisateur qui peut être activé tant que l’utilisateur est présent dans le système, ce qui signifie que son cycle de vie de conception est « permanent ».Par conséquent, les événements connexes ne peuvent pas être supprimés et doivent être sauvegardés en permanence pour s’assurer que les données du panier sont correctes.Mais si nous ne sommes plus préoccupés par ce qui est arrivé au caddie il y a un an.Nous pouvons diviser manuellement le panier d’un seul utilisateur par année.Dans le même temps, nous pouvons « copier l’État » du panier d’achat dans les deux prochaines années.Cela se poursuit les données d’état de l’année précédente, ce qui entraîne un cycle de vie de conception plus court pour le panier de l’utilisateur et aucun impact sur l’entreprise.Nous pouvons utiliser une légende chinoise classique, « Fool’s Mountain », pour comprendre cette division du cycle de vie du temps de conception basée sur le temps.Dans l’histoire, l’imbécile est mortel, bien que ne peut pas vivre longtemps (cycle de vie de temps de conception courte), mais l’esprit de l’imbécile (cycle de vie plus long de temps de conception) peut être avec les générations futures et continuer, et peut donc accomplir le grand travail des montagnes mobiles.Lorsque chaque génération d'«imbéciles » est remplacée, la « copie d’état » mentionnée ci-dessus (suite spirituelle) se produit.Ainsi, avec un cycle de vie plus court de conception-temps, les exigences d’un cycle de vie plus long ou même permanent de conception-temps sont réalisées.

> « Les imbéciles se déplacent mountains Taih, Wang House deux montagnes, sept cents miles carrés, sept ou huit mille pieds de haut, à l’origine dans la partie sud de Zhangzhou, le nord de la rive nord jaune de la rivière Nord. Sous la montagne du nord se trouve un homme nommé Fool Gong, qui a près de 90 ans et vit directement en face de la montagne.Souffrant de l’obstruction dans la partie nord de la montagne, il est sorti faire un détour, et a appelé toute la famille pour discuter de it：« Je vais faire de mon mieux pour déterrer les montagnes escarpées de sorte que la route va tout le chemin à la partie sud de Yuzhou et à la rive sud de Hanshui, ok? » Tout le monde est d’accord.Sa femme asked：« Avec votre force, même le père de la colline ne peut pas être aplati, peut tai ligne, la maison du roi comment? »D’ailleurs, où avez-vous mis la terre et les pierres ? « Les gens disent,：jetez-le sur le bord de la mer de Bohai, le côté nord de la terre cachée. » Ainsi, l’imbécile a conduit les trois personnes qui pouvaient porter le fardeau sur la montagne, ciseler la pierre, creuser la terre, et transporter 畚 le bord de mer avec un cornichon.La veuve d’un voisin, Jingcheng, avait un orphelin, qui n’avait que sept ou huit ans, et a sauté pour l’aider.Saison d’hiver et d’été, afin d’aller et venir une fois. Le sage de Hequ se mit à rire de l’imbécile et l’arrêta de le faire, disant:：« Tu es si stupide ! »Avec vos années résiduelles, le reste de la force, même une herbe sur la montagne ne peut pas se déplacer, mais aussi la pierre de sol comment? Beishan long sighed：« Votre esprit est vraiment têtu, têtu ne peut pas ouvrir le truc, même les veuves orphelines ne peuvent pas être comparés. »Même si je meurs, il y a des fils dans ah; des fils et petits-enfants, des petits-enfants et des fils; des fils, des fils et des petits-enfants; des enfants et des petits-enfants sans fin, mais les montagnes n’augmenteront pas, mais aussi peur de creuser de façon inégale? « River Quzhi n’a rien à répondre. Le dieu de la montagne tenant le serpent en entendit parler, de peur qu’il ne creuse sans cesse et le signale à l’empereur.L’empereur fut ému par la sincérité de l’imbécile et ordonna aux deux fils d’Hercule Kwa d’emporter les deux montagnes, l’une dans la partie orientale de Shufang et l’autre dans la partie sud de Luzhou.À partir de ce moment, la partie sud de Luzhou jusqu’à la rive sud de Hanshui, il n’y a plus de montagnes bloquées.
