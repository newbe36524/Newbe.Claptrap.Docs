---
title: "2 番目の手順 - プロジェクトを作成します"
description: "2 番目の手順 - プロジェクトを作成します"
---

前の記事「 [最初のステップ - 開発環境の準備](01-1-Preparation.md) に続いて、Newbe.Claptrap プロジェクトを作成する方法について説明します。

<!-- more -->

## プロジェクト テンプレートをインストールします

コンソールを開き、次のコマンドを実行して、最新のプロジェクト テンプレートをインストールします：

```bash
dotnet new --install Newbe.Claptrap.Template
```

インストールが完了したら、インストール結果に既にインストールされているプロジェクト テンプレートを表示できます。

![newbe.claptrap.templateのインストールが完了しました](/images/20200709-001.png)

## プロジェクトを作成します

場所を選択してフォルダを作成し、この例では、`D:\Repo`の下に`HelloClaptrap`という名前のフォルダを作成します。このフォルダは、新しいプロジェクトのコード フォルダとして機能します。

コンソールを開き、作業ディレクトリを`D:\Repo\HelloClaptrap に切り替`。次に、次のコマンドを実行して、プロジェクトの：

```bash
dotnet new newbe.claptrap --name HelloClaptrap
```

> 一般に、`D:\Repo\HelloClaptrap`Git リポジトリ フォルダとして作成します。バージョン管理でソースを管理します。

## プロジェクトを開始します

次に、コマンド ラインを使用してプロジェクトを開始します。コマンド ラインを`C:\Repos\HelloClaptrap\HelloClaptrap`に切り替え、次のコマンドを実行します：

```bash
tye run
```

開始後、プロジェクト テンプレートに含まれるすべてのプロジェクトが tye dashboard で表示：

![newbe.claptrap service](/images/20210217-002.png)

> tye dashboard のアドレスは通常 <http://localhost:8000>で、ポートが占有されている場合は、別のポートが自動的に使用され、コマンド ラインのプロンプトを表示して、現在の特定のアドレスを取得できます。

上記の図に示すインターフェイスでは、`helloclaptrap-webapi`実行アドレスを確認できます。たとえば、上の図に示すように、エンドポイント アドレスは<http://localhost:14285>。

そのため、ブラウザを使用してアドレスを開き、swagger インターフェイスを表示します。

[swagger] ページで、`/AuctionItems/ /status /{itemId}API を呼び`試：

![newbe.claptrap AuctionItems​](/images/20210217-003.png)

サービスが 200 を返す場合は、現在のサービスの個々のコンポーネントが正常に開始されています。

## 体験プロジェクト

プロジェクトテンプレートを使用して作成されたプロジェクトは、実際にはオークションオークションビジネスをシミュレートするプログラムです。

オークション オークションは、同時要求で処理する必要がある一般的なビジネス シナリオです。Newbe.Claptrap を使用すると、この問題を簡単に解決できます。このビジネス シナリオは、今後のドキュメントで継続的にデモを行いますので、ここでは簡単なビジネス シナリオの説明を示します。

### ビジネス ルール

ビジネス ルールは、大まかに次のようになります：

1. 各オークションは、一意の `itemId によって`
2. オークションは、一定期間のみオークションすることができます
3. オークション商品には開始オークション価格があります
4. すべての入札者は、一意の `userId を`
5. 入札者は、オークション期間中にオークションに無制限に入札し、現在の最高入札額よりも大きい限り、有効な入札としてカウントされ、現在の落札者になります
6. 入札時間、入札額、入札者など、成功した入札の詳細を記録する必要があります。

オークションのステータスは次のとおりです：

- `0 Planned` ショットを待ちます
- `1 OnSell` オークション中です
- `2 Sold` 撮影されています
- `3 UnSold` ストリームショット

### API デザイン

このサンプルでは、最も単純なデモのために、次の API を設計しました ：

- `GET /AuctionItems/{itemId}/status` 指定したオークションの現在のスポットステータスを取得します
- `GET /AuctionItems/{itemId}` 指定されたオークションの詳細を取得します
- `POST /AuctionItems` 指定されたオークションに入札します

ここでは、単純なシナリオを使用して、これらの API の効果を体験します。

#### 現在販売されているオークションを探します

オークションの状態は時間の影響を受けるので,開発者がいつでも様々な状態のオークション品を見つけることができるように,プロジェクトには時間ベースのアルゴリズムを用いてすべての状態のオークション品を生成する.

開発者は、0/1/2/3 の 4 つの itemId 呼び出し`GET /AuctionItems/{itemId}/status`を使用して、オークションの現在の状態を取得できます。

少なくとも 1 つのステータスが `1 OnSell` が存在します。後で説明するために、itemId が 1 である必要があります。

#### オークションの詳細を表示します

GET `GET /AuctionItems/{itemId}` を使用して、オークションの詳細を照会できます。たとえば、itemId を 1 としてクエリすると、次のような結果が得られます。

```json
{
  "state": {
    "biddingRecords": null,
    "basePrice": 10,
    "startTime": "2021-02-27T12:59:12.673013+08:00",
    "endTime": "2021-02-27T16:59:12.673013+08:00"
  }
}
```

上記の結果は、：

- オークションは basePrice 10 から開始されます
- 入札期間は startTime - endTime 時間の期間です
- 現在の入札レコード biddingRecords は空です

これらの期間は、プロジェクト テンプレートを開始するタイミングによって異なる場合があります。

#### 入札してください

次に、`POST /AuctionItems`を呼び出して、現在オークションに入札し、次のようなパラメータを渡します：

```json
{
  "userId": 1,
  "price": 36524,
  "itemId": 1
}
```

パラメータの説明は次のとおりです：

- 入札者 userId は 1 です
- 入札価格は36524です
- オークション商品は itemId 1 です

これにより、結果が得られます：

```json
{
  "success": true,
  "userId": 1,
  "auctionItemStatus": 1,
  "nowPrice": 36524
}
```

戻り値の結果は：

- success の入札は成功しました
- 入札者 userId は 1 です
- 最新の入札額は 36524 です
- オークションの現在のステータスは `1 OnSell です`

次に、 `GET /AuctionItems/{itemId}` を使用して、最新のオークションを表示します：

```json
{
  "state": {
    "biddingRecords": {
      "36524": {
        "userId": 1,
        "price": 36524,
        "biddingTime": "2021-02-27T07:31:09.8954519+00:00"
      }
    },
    "basePrice": 10,
    "startTime": "2021-02-27T12:59:12.673013+08:00",
    "endTime": "2021-02-27T16:59:12.673013+08:00"
  }
}
```

上記の結果は、：

- 入札記録が更新され、最新のオークションの詳細が追加されました。

これにより、最も簡単な入札デモが完了します。

開発者は、上記の API の基本的な使用を体験するために、さまざまな状態とパラメーターを自分で試すことができます。たとえば、入札単価が現在の上限入札単価よりも小さい場合や、リメイクされていない商品に入札する場合などです。

## プロジェクトを停止します

現在実行中のテンプレート プロジェクトを停止する場合。実行した`tye run`を実行しているコンソールでキーボードを使用して`Ctrl`+`C`押すだけで、実行中のプログラムを停止できます。

## 小さな結び目

この記事では、プロジェクト テンプレートをインストールし、プロジェクト テンプレートを使用する基本的な手順について説明しました。

次に、プロジェクト テンプレートに含まれる主な内容について説明します。

<!-- md Footer-Newbe-Claptrap.md -->
