---
title: '状態 (ステート)'
metaTitle: '状態 (ステート)'
metaDescription: '状態 (ステート)'
---

> [現在表示されているバージョンは、機械が簡体字中国語から翻訳され、手動校正の結果です。ドキュメントに不適切な翻訳がある場合は、こちらをクリックして翻訳提案を提出してください。](https://crwd.in/newbeclaptrap)

State は、Actor パターンでアクター オブジェクトの現在のデータパフォーマンスを表します。Claptrap は、この上に 1 つの制限を追加するだけです。："State は、イベントのトレースによってのみ更新できます。由于事件溯源的可靠性，Claptrap 中的 State 也就拥有了更好的可靠性。

## State 的版本号

在 Claptrap 中的 State 有一个名为 Version 的属性，它表示 State 当前的版本。版本号是一个从 0 开始的自增数字，会在每次处理一个事件之后进行自增。

バージョン番号が 0 の State は Claptrap の初期状態であり、ジェネシス状態とも呼ばれます。初期状態は、ビジネス ニーズに合わせて調整できます。

Claptrap と Minion には、バージョン番号の処理にはいくつかの違いがあります。

Claptrap の場合、Claptrap はイベントのプロデューサであるため、イベントのバージョン番号自体は Claptrap によって付与されます。たとえば、イベントの処理中に、次の処理が順番に発生します。：

1. ステートバージョン = 1000。
2. バージョン = State Version = 1 = 1001 で Event の処理を開始します。
3. イベントが処理され、State Version = 1001 が更新されます。

Minion の場合、Claptrap イベントのコンシューマーであるためです。したがって、バージョン番号の処理は若干異なります。たとえば、イベントの処理中に、次のイベントが順番に発生します。：

1. ステートバージョン = 1000。
2. Event Version が 1001 のイベントが読み取られます。
3. イベントが処理され、State Version = 1001 が更新されます。

State のバージョン番号と Event のバージョン番号は相互依存しており、相互に検証され、イベントの順序付けの鍵となります。処理中に State のバージョン番号と Event のバージョン番号が一致しない場合は、深刻な問題になります。通常、バージョン番号の不一致は 2 つだけです。：

1. 永続化レイヤーのイベントが失われました。
2. フレームワーク悪性バグ。

## ICON

![claptrap.](/images/claptrap_icons/state.svg)
