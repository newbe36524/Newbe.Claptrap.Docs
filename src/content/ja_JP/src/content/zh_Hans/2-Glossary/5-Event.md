---
title: 'イベント (イベント)'
metaTitle: 'イベント (イベント)'
metaDescription: 'イベント (イベント)'
---

> [現在表示されているバージョンは、機械が簡体字中国語から翻訳され、手動校正の結果です。ドキュメントに不適切な翻訳がある場合は、こちらをクリックして翻訳提案を提出してください。](https://crwd.in/newbeclaptrap)

Claptrap は、イベントトレースに基づくアクター パターンです。イベントは当然重要な役割を果たします。

Claptrap を操作するには、Claptrap にイベントを渡す必要があります。イベントは、Claptrap State を変更する唯一のパラメーターでもあります。したがって、Claptrap を使用してシステムを構築すると、すべてのシステム操作がイベントに変換され、Claptrap に渡されます。イベントには、次の特性があります。：

## イベントは順序付けされています。

各イベントには、一意のシーケンス番号が含まれています。このフレームワークでは、このシリアル番号はバージョン番号 (Version) と呼ばれます。イベントのバージョン番号は、1 から 1 ずつインクリメントされるシーケンスです。イベントの順序付けにより、状態の計算に同時実行の問題がないことを確認します。これは、状態データの信頼性の重要な保証です。

イベントの順序は、Claptrap 実行イベントの順序に直接反応します。この順序を確保する必要があるため、Claptrap はイベントを実行するときにイベントごとに処理する必要があります。これは、アクター パターンのシングル スレッド機能と自然な適合を生み出します。

## イベントは不変です。

イベントが生成されると、イベントは不変です。イベントは、データが信頼できる原因となるため、イベントの不変性のためにトレースされます。イベントが読み取られると、いずれかのイベントの実行後に状態を復元できるためです。しかし、不変は物理的な制限ではありません。物理ストアのイベント データは変更できます。しかし、これは危険であり、非常に推奨されない行為であることに注意してください。デザインパターンの「オープンクローズ原則」に連絡し、古典は「拡張にオープンで、変更されたクロージャ」と要約することができます。なぜ「修正の閉鎖」を強調するのですか?著者の見解では、修正の閉鎖の原因は、実際には、変更によってもたらされる未知の結果である。過去に実行されたコードのために、結果のデータ。彼らはすべての特定の閉鎖性を形成している。彼らは、既存のテストによって検証されています。それらを変更しようとすると、テストを調整する必要があり、変更をさらに悪化させる必要があります。イベントの不変性は性質であり、要件です。

では、バグが過去のイベント データを誤って生成し、バグを修正する必要がある場合はどうでしょうか。著者のアドバイスは、既存のイベントを変更しようとしないでください。新しいイベントとアルゴリズムを追加して、現在の状態を修正する必要があります。古いコンテンツを調整しないでください。著者は、これはオープンクローズの原則とより一致していると考えています。開発者は自分で考えることができます。

## イベントは永続的です。

イベントは、Claptrap State の正確性を確保するための重要なパラメータです。したがって、イベントが永続的に保存されていることを確認する必要があります。しかし、これは絶対的なケースではなく、次の条件が満たされると、イベントが失われることが許されます。：

1. イベントが失われる前に永続的な State スナップショットが存在します。
2. 対応するClaptrapは、もはやアクティブになることはありませんので、人生は終わりました。

逆に、上記の条件が満たされない場合は、運用環境でのイベントが永続化層に正しく保存され、対応する災害対応手段があることを確認する必要があります。

## ICON.

![claptrap.](/images/claptrap_icons/event.svg)
